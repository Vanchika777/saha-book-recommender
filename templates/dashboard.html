<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash {{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}


    <!-- welcome section -->
    <div class="welcome">
        <h1>Welcome back, {{ user.username }} âœ¨</h1>
        <p class="sub">Your calm little reading universe</p>
    </div>
   
    <!-- Top book carousel -->
    <div class="top-section">

        <div class="section-title">
            <h2>Your Books</h2>
            <a href="/add-book" class="add-btn">+ Add Book</a>
        </div>

        <div class="carousel">

            {% if books %}
                {% for book in books %}

                <div class="book-card">
                    
                    {% if book.thumbnail %}
                        <img src="{{ book.thumbnail }}" class="book-img">
                    {% else %}
                        <div class="cover"></div>
                    {% endif %}


                    <h4>{{ book.title }}</h4>
                    <p>{{ book.author }}</p>
                </div>

                {% endfor %}
            {% else %}

            <!-- empty placeholders -->
                {% for i in range(6) %}
                <div class="book-card empty">
                    <div class="cover"></div>
                    <p>your future reads âœ¨</p>
                </div>
                {% endfor %}

            {% endif %}

        </div>
    </div>


    <!-- MIDDLE SAHA CHAT -->
    <div class="chat-section">

        <div class="chat-card">
            <h3>Saha is here ðŸ“š</h3>

         {% if recommended_genre %}
                <p>
                Soâ€¦ you clearly love  
                <strong>{{ recommended_genre }}</strong> books.  
                I approve. Good taste. ðŸ˜Œ
                </p>
            {% else %}
                <p>Add books and Iâ€™ll start judging your taste lovingly.</p>
        {% endif %}

            <div class="chat-box">
                <input type="text" placeholder="Ask Saha for recommendation...">
                <button>Send</button>
            </div>
        </div>

    </div>


    <!-- RECOMMENDATIONS -->
    {% if recommended_books %}
    <div class="rec-section">
        <h2>Books you may like</h2>

        <div class="rec-grid">
            {% for book in recommended_books %}
            <div class="rec-card">

                <img src="{{ book.thumbnail }}">
                <h4>{{ book.title }}</h4>
                <p>{{ book.author }}</p>

            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}


    <div class="logout">
        <a href="/logout">logout</a>
    </div>
</body>
</html>


    